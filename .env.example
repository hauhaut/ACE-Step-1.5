# ACE-Step Configuration
# Copy to .env and modify as needed

# === Model Configuration ===
ACESTEP_CONFIG_PATH=acestep-v15-turbo       # DIT model config: acestep-v15-turbo, acestep-v15-fast
ACESTEP_LM_MODEL_PATH=acestep-5Hz-lm-4B     # LM model: acestep-5Hz-lm-0.6B, 1.7B, 4B
ACESTEP_DEVICE=cuda                         # Device: cuda, cpu, auto
ACESTEP_LM_BACKEND=vllm                     # LM backend: vllm, transformers
ACESTEP_LM_DEVICE=auto                      # LM device (defaults to ACESTEP_DEVICE)

# === API Server ===
ACESTEP_API_HOST=127.0.0.1                  # Bind address
ACESTEP_API_PORT=8001                       # Port
ACESTEP_API_KEY=                            # Optional API key for auth
ACESTEP_API_WORKERS=1                       # Uvicorn workers (1 recommended)

# === Queue Settings ===
ACESTEP_QUEUE_MAXSIZE=200                   # Max queued jobs
ACESTEP_QUEUE_WORKERS=1                     # GPU workers (1 per GPU)
ACESTEP_AVG_JOB_SECONDS=5.0                 # Initial avg job time for ETA
ACESTEP_AVG_WINDOW=50                       # Window for moving avg

# === Memory/Performance ===
ACESTEP_OFFLOAD_TO_CPU=false                # Offload DIT to CPU after inference
ACESTEP_LM_OFFLOAD_TO_CPU=false             # Offload LM to CPU after inference
ACESTEP_OFFLOAD_DIT_TO_CPU=false            # Keep DIT on CPU (low VRAM mode)
ACESTEP_USE_FLASH_ATTENTION=true            # Use flash attention if available
ACESTEP_INIT_LLM=true                       # Initialize LM on startup

# === Paths ===
ACESTEP_TMPDIR=                             # Custom temp dir (default: HF_HOME/tmp)
ACESTEP_DOWNLOAD_SOURCE=auto                # Download source: auto, huggingface, modelscope

# === Multi-Model (Advanced) ===
ACESTEP_CONFIG_PATH2=                       # Secondary DIT config
ACESTEP_CONFIG_PATH3=                       # Tertiary DIT config

# === Debug/Testing ===
MAX_CUDA_VRAM=                              # Override detected GPU memory (GB)

# === OpenRouter Server (separate service) ===
OPENROUTER_HOST=127.0.0.1
OPENROUTER_PORT=8002
OPENROUTER_API_KEY=
OPENROUTER_BASE_URL=

# === Service Mode (internal use) ===
# SERVICE_MODE_DIT_MODEL=
# SERVICE_MODE_LM_MODEL=
# SERVICE_MODE_BACKEND=vllm

# === Cache Directories ===
# TRITON_CACHE_DIR=                         # Triton kernel cache
# TORCHINDUCTOR_CACHE_DIR=                  # TorchInductor cache
